{"version":3,"sources":["../src/wordsselection.js"],"names":["init","selectedWordsIds","map","data","get","submitButton","length","prop","on","event","element","target","wordId","wordIndex","indexOf","splice","removeClass","push","addClass","val","join","trigger"],"mappings":"iJASA,uDAEO,GAAMA,CAAAA,CAAI,CAAG,UAAM,IAClBC,CAAAA,CAAgB,CAAG,cAAE,kBAAF,EAAsBC,GAAtB,CAA0B,UAAW,CACxD,MAAO,cAAE,IAAF,EAAQC,IAAR,CAAa,SAAb,CACV,CAFsB,EAEpBC,GAFoB,EADD,CAKlBC,CAAY,CAAG,cAAE,0BAAF,CALG,CAOtB,GAA+B,CAA3B,EAAAJ,CAAgB,CAACK,MAArB,CAAkC,CAC9BD,CAAY,CAACE,IAAb,CAAkB,UAAlB,IACH,CAED,cAAE,aAAF,EAAiBC,EAAjB,CAAoB,OAApB,CAA6B,SAACC,CAAD,CAAW,IAC9BC,CAAAA,CAAO,CAAG,cAAED,CAAK,CAACE,MAAR,CADoB,CAE9BC,CAAM,CAAGF,CAAO,CAACP,IAAR,CAAa,SAAb,CAFqB,CAI9BU,CAAS,CAAGZ,CAAgB,CAACa,OAAjB,CAAyBF,CAAzB,CAJkB,CAKpC,GAAgB,CAAC,CAAb,CAAAC,CAAJ,CAAoB,CAChBZ,CAAgB,CAACc,MAAjB,CAAwBF,CAAxB,CAAmC,CAAnC,EACAH,CAAO,CAACM,WAAR,CAAoB,MAApB,CACH,CAHD,IAGO,CACHf,CAAgB,CAACgB,IAAjB,CAAsBL,CAAtB,EACAF,CAAO,CAACQ,QAAR,CAAiB,MAAjB,CACH,CAEDb,CAAY,CAACE,IAAb,CAAkB,UAAlB,CAAyD,CAA3B,EAAAN,CAAgB,CAACK,MAA/C,CACH,CAdD,EAgBAD,CAAY,CAACG,EAAb,CAAgB,OAAhB,CAAyB,UAAM,CAC3B,cAAE,4BAAF,EAAgCW,GAAhC,CAAoClB,CAAgB,CAACmB,IAAjB,EAApC,EACA,cAAE,gCAAF,EAAoCC,OAApC,CAA4C,QAA5C,CACH,CAHD,CAIH,CA/BM,C","sourcesContent":["/**\n * Words selection.\n *\n * Fills an array of IDs by clicking on words in a text (links are defined in PHP).\n *\n * @package mod_tupf\n * @author Marc Heimendinger\n */\n\nimport $ from 'jquery';\n\nexport const init = () => {\n    let selectedWordsIds = $('a.tupf-word.mark').map(function() {\n        return $(this).data('word-id');\n    }).get();\n\n    let submitButton = $('input#tupf-submit-button');\n\n    if (selectedWordsIds.length == 0) {\n        submitButton.prop('disabled', true);\n    }\n\n    $('a.tupf-word').on('click', (event) => {\n        const element = $(event.target);\n        const wordId = element.data('word-id');\n\n        const wordIndex = selectedWordsIds.indexOf(wordId);\n        if (wordIndex > -1) { // Deselection\n            selectedWordsIds.splice(wordIndex, 1);\n            element.removeClass('mark');\n        } else { // Selection\n            selectedWordsIds.push(wordId);\n            element.addClass('mark');\n        }\n\n        submitButton.prop('disabled', selectedWordsIds.length == 0);\n    });\n\n    submitButton.on('click', () => {\n        $('input[name=selected-words]').val(selectedWordsIds.join());\n        $('form#tupf-words-selection-form').trigger('submit');\n    });\n};"],"file":"wordsselection.min.js"}